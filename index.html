<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë°°ìˆ˜êµ¬ ì‚¬ì§„ ì‹ ê³ </title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    h2 {
      color: #222;
    }
    #location {
      margin: 10px 0;
    }
    button {
      padding: 8px 12px;
      background-color: #4caf50;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>ğŸ“· ë°°ìˆ˜êµ¬ ì‚¬ì§„ì„ ì´¬ì˜í•´ ì£¼ì„¸ìš”</h2>

  <!-- ì‚¬ì§„ ì…ë ¥ -->
  <input type="file" accept="image/*" capture="environment" id="photoInput"><br><br>

  <!-- ìœ„ì¹˜ ì¶œë ¥ -->
  <p id="location">ğŸ“ ì‚¬ì§„ ì„ íƒ í›„ ìœ„ì¹˜ ì •ë³´ê°€ ìë™ìœ¼ë¡œ ê°±ì‹ ë©ë‹ˆë‹¤.</p>

  <!-- ì „ì†¡ ë²„íŠ¼ -->
  <button onclick="upload()">ğŸ“¤ ì‚¬ì§„ + ìœ„ì¹˜ ì „ì†¡</button>

  <script>
    let currentLat = null;
    let currentLon = null;

    // ì‚¬ì§„ ì„ íƒ ì‹œ GPS ìœ„ì¹˜ ì¬ìš”ì²­
    document.getElementById('photoInput').addEventListener('change', () => {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          currentLat = position.coords.latitude;
          currentLon = position.coords.longitude;
          document.getElementById("location").innerText =
            `ğŸ“ ìœ„ì¹˜: ${currentLat}, ${currentLon}`;
        },
        (error) => {
          document.getElementById("location").innerText = "â— GPS í—ˆìš©ì´ í•„ìš”í•©ë‹ˆë‹¤!";
        }
      );
    });

    // ì‚¬ì§„ + GPS ë°ì´í„° ì „ì†¡
    function upload() {
      const fileInput = document.getElementById('photoInput');
      const file = fileInput.files[0];

      if (!file) {
        alert("ğŸ“¸ ì‚¬ì§„ì„ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”.");
        return;
      }

      const formData = new FormData();
      formData.append("photo", file);
      formData.append("latitude", currentLat);
      formData.append("longitude", currentLon);

      // ì—¬ê¸°ì„œ ì‹¤ì œ ì„œë²„ ì „ì†¡ ê°€ëŠ¥
      console.log("âœ… ì „ì†¡í•  ë°ì´í„°:");
      console.log("ì‚¬ì§„:", formData.get("photo"));
      console.log("ìœ„ë„:", formData.get("latitude"));
      console.log("ê²½ë„:", formData.get("longitude"));

      alert("ğŸ“¤ ì „ì†¡ ì™„ë£Œ (í…ŒìŠ¤íŠ¸ìš© ì¶œë ¥ì…ë‹ˆë‹¤)");
    }
  </script>
</body>
</html>
